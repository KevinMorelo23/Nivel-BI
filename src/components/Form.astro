---
interface MaturityLevel {
  name: string;
  range: [number, number];
  description: string;
  steps: [string, string, string, string, string, string, string];
}

const maturityLevels: MaturityLevel[] = [
  {
    name: "Nivel 1: Inconsciente (Unaware)",
    range: [5, 9],
    description:
      "La empresa no tiene procesos formales de Business Intelligence (BI) y las decisiones se basan en la intuici贸n y la experiencia personal. No hay herramientas de BI implementadas ni una cultura de datos establecida, lo que dificulta la toma de decisiones estrat茅gicas. Para avanzar, se recomienda iniciar con la recopilaci贸n estructurada de datos en hojas de c谩lculo o bases de datos b谩sicas y fomentar la concienciaci贸n sobre la importancia del an谩lisis de datos en la toma de decisiones.",
    steps: [
      "Investigaci贸n preliminar: Analizar la situaci贸n actual de la empresa y la falta de procesos de BI.",
      "Mapear riesgos: Identificar riesgos como resistencia al cambio, falta de conocimientos o datos desorganizados.",
      "Crear una lista de tareas: Documentar los pasos b谩sicos para iniciar la adopci贸n de BI",
      "Mapear cronograma e hitos: Definir un plan a corto plazo para establecer pr谩cticas de recolecci贸n de datos",
      "Crear equipo y roles: Designar responsables para la gesti贸n y an谩lisis de datos inicial",
      "Asignar recursos: Destinar presupuesto y herramientas b谩sicas como Excel o Google Sheets",
      "Definir indicadores: Medir la mejora en la organizaci贸n y uso de datos con KPIs simples.",
    ],
  },

  {
    name: "Nivel 2: Oportunista (Opportunistic)",
    range: [10, 14],
    description:
      "Existen algunas iniciativas aisladas de BI en ciertas 谩reas, pero no hay un enfoque estandarizado ni integraci贸n entre departamentos. Algunas 谩reas del negocio generan reportes b谩sicos, pero sin un an谩lisis profundo ni automatizaci贸n. La dependencia de herramientas manuales y la falta de acceso centralizado a los datos limitan la capacidad de tomar decisiones basadas en informaci贸n confiable. Para mejorar, se recomienda implementar herramientas b谩sicas de BI, como dashboards simples, y establecer procesos iniciales para la recopilaci贸n y an谩lisis de datos.",
    steps: [
      "Investigaci贸n preliminar: Evaluar iniciativas de BI ya existentes y sus limitaciones",
      "Mapear riesgos: Identificar problemas de estandarizaci贸n e integraci贸n entre 谩reas.",
      "Crear una lista de tareas: Definir acciones para mejorar la consolidaci贸n de datos y procesos",
      "Mapear cronograma e hitos: Planificar la implementaci贸n de herramientas de BI en departamentos clave.",
      "Crear equipo y roles: Ampliar el equipo de datos e involucrar l铆deres de diferentes 谩reas",
      "Asignar recursos: Invertir en herramientas b谩sicas de BI como Power BI o Google Data Studio",
      "Definir indicadores: Medir el uso de BI en diferentes 谩reas y la calidad de los reportes generados.",
    ],
  },
  {
    name: "Nivel 3: Est谩ndar (Standards)",
    range: [15, 19],
    description:
      "La empresa comienza a desarrollar un enfoque coordinado en el uso de BI. Se establecen m茅tricas y herramientas compartidas, aunque a煤n existen limitaciones en la integraci贸n total de los datos. Las decisiones comienzan a basarse en informaci贸n m谩s estructurada, pero pueden existir problemas de calidad de datos y acceso en tiempo real. Para avanzar, se recomienda fortalecer la gobernanza de datos, mejorar la integraci贸n entre sistemas y capacitar a los empleados en el uso de herramientas de BI m谩s avanzadas.",
    steps: [
      "Investigaci贸n preliminar: Realizar un diagn贸stico integral del uso de BI en la empresa.",
      "Mapear riesgos: Identificar obst谩culos en la integraci贸n de datos y la automatizaci贸n de reportes",
      "Crear una lista de tareas: Documentar acciones para la implementaci贸n de un Data Warehouse.",
      "Mapear cronograma e hitos: Establecer plazos para la integraci贸n de datos y desarrollo de dashboards",
      "Crear equipo y roles: Definir especialistas en datos, analistas y responsables de cada 谩rea",
      "Asignar recursos: Implementar soluciones de almacenamiento de datos y herramientas anal铆ticas m谩s avanzadas.",
      "Definir indicadores: Evaluar la adopci贸n de BI, calidad de datos y generaci贸n de insights accionables",
    ],
  },
  {
    name: "Nivel 4: Empresarial (Enterprise)",
    range: [20, 22],
    description:
      "La empresa utiliza BI en todas sus 谩reas con un enfoque estructurado y alineado a sus objetivos estrat茅gicos. Se toman decisiones basadas en datos y la infraestructura de BI est谩 bien definida, con acceso centralizado y reportes automatizados. Sin embargo, a煤n puede haber oportunidades de mejora en t茅rminos de an谩lisis predictivo y optimizaci贸n de procesos. Para seguir evolucionando, se recomienda explorar tecnolog铆as avanzadas como Machine Learning e inteligencia artificial para mejorar la toma de decisiones.",
    steps: [
      "Investigaci贸n preliminar: Analizar la madurez de BI en toda la empresa y detectar 谩reas de optimizaci贸n",
      "Mapear riesgos: Identificar desaf铆os en la gobernanza de datos, escalabilidad e integraci贸n con sistemas actuales.",
      "Crear una lista de tareas: Dise帽ar un plan para optimizar la infraestructura y seguridad de B",
      "Mapear cronograma e hitos: Establecer fases para la implementaci贸n de an谩lisis predictivo y automatizaci贸n de insights.",
      "Crear equipo y roles: Integrar expertos en datos, IA y l铆deres estrat茅gicos.",
      "Asignar recursos: Implementar plataformas avanzadas en la nube y herramientas de Big Data.",
      "Definir indicadores: Medir el impacto de BI en la toma de decisiones estrat茅gicas y en la eficiencia operativa.",
    ],
  },
  {
    name: "Nivel 5: Transformador (Transformative)",
    range: [23, 25],
    description:
      "BI es un pilar estrat茅gico de la empresa, integr谩ndose en todos los procesos operativos y de toma de decisiones. Se utilizan herramientas avanzadas como inteligencia artificial y Machine Learning para realizar an谩lisis predictivos y optimizar operaciones en tiempo real. La cultura organizacional est谩 centrada en el uso de datos y se fomenta la innovaci贸n basada en anal铆tica avanzada. Para mantener este nivel, se recomienda continuar la inversi贸n en nuevas tecnolog铆as, asegurar la calidad y seguridad de los datos y fomentar una cultura de mejora continua en BI.",
    steps: [
      "nvestigaci贸n preliminar: Evaluar la efectividad del BI actual y explorar tecnolog铆as emergentes",
      "Mapear riesgos: Considerar desaf铆os en la implementaci贸n de IA, an谩lisis en tiempo real y escalabilidad global.",
      "Crear una lista de tareas: Establecer iniciativas para aplicar Machine Learning e IA en la toma de decisiones",
      "Mapear cronograma e hitos: Planificar la adopci贸n de an谩lisis en tiempo real y personalizaci贸n avanzada",
      "Crear equipo y roles: Incorporar cient铆ficos de datos, ingenieros de IA y estrategas digitales",
      "Asignar recursos: Invertir en infraestructura avanzada y automatizaci贸n inteligente",
      "Definir indicadores: Medir la optimizaci贸n de procesos, el impacto en la innovaci贸n y el retorno de inversi贸n en BI",
    ],
  },
];
---

<div class="max-w-[1200px] mx-auto">
  <hr class="border-b-1 border-gray-300" />
  <div class="">
    <div class="p-6">
      <form id="bi-maturity-form" class="space-y-6">
        <div class="mb-4">
          <label for="companyName" class="block text-lg font-bold mb-2">
            Nombre de la Empresa
          </label>
          <input
            type="text"
            id="companyName"
            name="companyName"
            class="w-full p-2 border borde-1 shadow-md rounded-md"
            placeholder="Ingrese el nombre de la empresa"
          />
        </div>

        {
          [1, 2, 3, 4, 5].map((num) => (
            <div class="mb-4">
              <h3 class="font-bold text-lg mb-2">
                {num === 1 && "1. Uso de datos en la toma de decisiones"}
                {num === 2 && "2. Infraestructura y herramientas de BI"}
                {num === 3 && "3. Coordinaci贸n entre 谩reas para el uso de BI"}
                {num === 4 && "4. Cultura organizacional orientada a datos"}
                {num === 5 && "5. Impacto de BI en la empresa"}
              </h3>
              {[1, 2, 3, 4, 5].map((option) => (
                <div class="mb-2">
                  <label class="inline-flex items-center cursor-pointer">
                    <input
                      type="radio"
                      name={`q${num}`}
                      value={option}
                      class="mr-2"
                    />
                    {num === 1 &&
                      option === 1 &&
                      "No se utilizan datos para la toma de decisiones; se basa en la intuici贸n y experiencia."}
                    {num === 1 &&
                      option === 2 &&
                      "Se generan reportes b谩sicos, pero sin un an谩lisis profundo."}
                    {num === 1 &&
                      option === 3 &&
                      "Se emplean herramientas de BI para generar informes y dashboards."}
                    {num === 1 &&
                      option === 4 &&
                      "Se analizan los datos de manera integral en toda la empresa."}
                    {num === 1 &&
                      option === 5 &&
                      "Se utilizan modelos avanzados de an谩lisis predictivo y prescriptivo."}

                    {num === 2 &&
                      option === 1 &&
                      "No existen herramientas de BI implementadas en la organizaci贸n."}
                    {num === 2 &&
                      option === 2 &&
                      "Se utilizan herramientas b谩sicas de reportes en algunas 谩reas."}
                    {num === 2 &&
                      option === 3 &&
                      "Se cuenta con un Data Warehouse y herramientas de BI en m煤ltiples departamentos."}
                    {num === 2 &&
                      option === 4 &&
                      "La empresa tiene un ecosistema BI centralizado y estandarizado."}
                    {num === 2 &&
                      option === 5 &&
                      "La organizaci贸n emplea soluciones avanzadas con IA y Machine Learning."}

                    {num === 3 &&
                      option === 1 &&
                      "Cada departamento maneja sus datos sin coordinaci贸n."}
                    {num === 3 &&
                      option === 2 &&
                      "Algunos departamentos comparten datos, pero sin estandarizaci贸n."}
                    {num === 3 &&
                      option === 3 &&
                      "Existen normas y procesos para compartir datos de manera estructurada."}
                    {num === 3 &&
                      option === 4 &&
                      "La empresa tiene un centro de competencia BI con equipos dedicados."}
                    {num === 3 &&
                      option === 5 &&
                      "La organizaci贸n gestiona los datos de manera integral a nivel corporativo."}

                    {num === 4 &&
                      option === 1 &&
                      "No se fomenta el uso de datos para la toma de decisiones."}
                    {num === 4 &&
                      option === 2 &&
                      "Algunos l铆deres impulsan el uso de datos en sus equipos."}
                    {num === 4 &&
                      option === 3 &&
                      "Se promueve la formaci贸n en an谩lisis de datos y BI dentro de la organizaci贸n."}
                    {num === 4 &&
                      option === 4 &&
                      "Se han establecido procesos formales para la gesti贸n de datos."}
                    {num === 4 &&
                      option === 5 &&
                      "La empresa tiene una cultura 100% orientada a datos y BI."}

                    {num === 5 &&
                      option === 1 &&
                      "No hay impacto significativo, ya que el BI no est谩 implementado."}
                    {num === 5 &&
                      option === 2 &&
                      "Se utiliza BI en algunas 谩reas, pero con poca influencia en la estrategia."}
                    {num === 5 &&
                      option === 3 &&
                      "BI es clave en la operaci贸n diaria de la empresa."}
                    {num === 5 &&
                      option === 4 &&
                      "La organizaci贸n toma decisiones estrat茅gicas basadas en BI."}
                    {num === 5 &&
                      option === 5 &&
                      "BI es un pilar fundamental en la innovaci贸n y el crecimiento del negocio."}
                  </label>
                </div>
              ))}
            </div>
          ))
        }

        <button
          type="button"
          id="calculateBtn"
          class="border border-1 font-bold p-2 shadow-md rounded-md w-full mt-4"
        >
          Calcular Nivel de Madurez
        </button>

        <div
          id="resultContainer"
          class="hidden mt-4 p-4 border borde-1 shadow-md rounded-md"
        >
          <h3 class="text-xl font-bold mb-2" id="companyNameResult"></h3>
          <p class="mb-2">
            <strong> Puntaje Total:</strong>
            <span id="totalScoreResult"></span>
          </p>
          <p class="mb-2">
            <strong> Nivel de Madurez:</strong>
            <span id="maturityLevelResult"></span>
          </p>
          <p>
            <strong> Descripci贸n:</strong>
            <span id="maturityDescriptionResult"></span>
          </p>
        </div>
        <div
        id="resultSteps" 
        class="hidden mt-4 p-4 border borde-1 shadow-md rounded-md">
          <strong> Pasos a Implementar:</strong>
          <ul id="stepsList" class="mt-2 list-disc pl-5">
            
          </ul>
        </div>
      </form>
    </div>
  </div>
</div>

<script is:inline define:vars={{ maturityLevels }}>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("bi-maturity-form");
    const calculateBtn = document.getElementById("calculateBtn");
    const resultContainer = document.getElementById("resultContainer");
    const companyNameResult = document.getElementById("companyNameResult");
    const totalScoreResult = document.getElementById("totalScoreResult");
    const maturityLevelResult = document.getElementById("maturityLevelResult");
    const maturityDescriptionResult = document.getElementById(
      "maturityDescriptionResult"
    );

    calculateBtn.addEventListener("click", () => {
      const companyName =
        document.getElementById("companyName").value || "Empresa Sin Nombre";
      let totalScore = 0;

      // Calculate total score
      for (let i = 1; i <= 5; i++) {
        const selectedOption = document.querySelector(
          `input[name="q${i}"]:checked`
        );
        if (selectedOption) {
          totalScore += parseInt(selectedOption.value);
        } else {
          alert("Por favor, responda todas las preguntas");
          return;
        }
      }

      const matchedLevel = maturityLevels.find(
        (level) => totalScore >= level.range[0] && totalScore <= level.range[1]
      );
      const stepsList = document.getElementById("stepsList");
      stepsList.innerHTML = ""; // Limpiar los pasos anteriores
      matchedLevel.steps.forEach((step) => {
        const li = document.createElement("li");
        li.textContent = step;
        stepsList.appendChild(li);
      });

      companyNameResult.textContent = companyName;
      totalScoreResult.textContent = totalScore;
      maturityLevelResult.textContent = matchedLevel.name;
      maturityDescriptionResult.textContent = matchedLevel.description;
      resultContainer.classList.remove("hidden");
      resultSteps.classList.remove("hidden");
    });
  });
</script>
